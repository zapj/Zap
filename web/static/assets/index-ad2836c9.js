import{q as X,k as Y,b as w,n as N,I as K,m as G,r as V}from"./use-form-item-a052a009.js";import{a4 as E,ab as h,m as g,V as z,K as $,ah as j,u as _,ai as q,w as J,aj as Q,a9 as p,d as Z,q as P,j as x,U as F}from"./index-30516525.js";import{t as ee}from"./event-82c31e75.js";import{b as te,d as O}from"./runtime-3d504fca.js";const oe='a[href],button:not([disabled]),button:not([hidden]),:not([tabindex="-1"]),input:not([disabled]),input:not([type="hidden"]),select:not([disabled]),textarea:not([disabled])',ne=e=>getComputedStyle(e).position==="fixed"?!1:e.offsetParent!==null,Ee=e=>Array.from(e.querySelectorAll(oe)).filter(o=>se(o)&&ne(o)),se=e=>{if(e.tabIndex>0||e.tabIndex===0&&e.getAttribute("tabIndex")!==null)return!0;if(e.disabled)return!1;switch(e.nodeName){case"A":return!!e.href&&e.rel!=="ignore";case"INPUT":return!(e.type==="hidden"||e.type==="file");case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}},pe=function(e,o,...t){let n;o.includes("mouse")||o.includes("click")?n="MouseEvents":o.includes("key")?n="KeyboardEvent":n="HTMLEvents";const s=document.createEvent(n);return s.initEvent(o,...t),e.dispatchEvent(s),e};function ye(){if(!arguments.length)return[];var e=arguments[0];return X(e)?e:[e]}let c;const re=e=>{var o;if(!Y)return 0;if(c!==void 0)return c;const t=document.createElement("div");t.className=`${e}-scrollbar__wrap`,t.style.visibility="hidden",t.style.width="100px",t.style.position="absolute",t.style.top="-9999px",document.body.appendChild(t);const n=t.offsetWidth;t.style.overflow="scroll";const s=document.createElement("div");s.style.width="100%",t.appendChild(s);const u=s.offsetWidth;return(o=t.parentNode)==null||o.removeChild(t),c=n-u,c};var m=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(m||{});const y=e=>{const o=E(e)?e:[e],t=[];return o.forEach(n=>{var s;E(n)?t.push(...y(n)):h(n)&&E(n.children)?t.push(...y(n.children)):(t.push(n),h(n)&&((s=n.component)!=null&&s.subTree)&&t.push(...y(n.component.subTree)))}),t},be=(e,o,t)=>{let n={offsetX:0,offsetY:0};const s=i=>{const a=i.clientX,f=i.clientY,{offsetX:d,offsetY:v}=n,l=e.value.getBoundingClientRect(),b=l.left,T=l.top,k=l.width,D=l.height,I=document.documentElement.clientWidth,B=document.documentElement.clientHeight,H=-b+d,R=-T+v,U=I-b-k+d,W=B-T-D+v,S=M=>{const C=Math.min(Math.max(d+M.clientX-a,H),U),A=Math.min(Math.max(v+M.clientY-f,R),W);n={offsetX:C,offsetY:A},e.value&&(e.value.style.transform=`translate(${w(C)}, ${w(A)})`)},L=()=>{document.removeEventListener("mousemove",S),document.removeEventListener("mouseup",L)};document.addEventListener("mousemove",S),document.addEventListener("mouseup",L)},u=()=>{o.value&&e.value&&o.value.addEventListener("mousedown",s)},r=()=>{o.value&&e.value&&o.value.removeEventListener("mousedown",s)};g(()=>{z(()=>{t.value?u():r()})}),$(()=>{r()})},Te=(e,o={})=>{j(e)||ee("[useLockscreen]","You need to pass a ref param to this function");const t=o.ns||_("popup"),n=q(()=>t.bm("parent","hidden"));if(!Y||N(document.body,n.value))return;let s=0,u=!1,r="0";const i=()=>{setTimeout(()=>{V(document==null?void 0:document.body,n.value),u&&document&&(document.body.style.width=r)},200)};J(e,a=>{if(!a){i();return}u=!N(document.body,n.value),u&&(r=document.body.style.width),s=re(t.namespace.value);const f=document.documentElement.clientHeight<document.body.scrollHeight,d=K(document.body,"overflowY");s>0&&(f||d==="scroll")&&u&&(document.body.style.width=`calc(100% - ${s}px)`),G(document.body,n.value)}),Q(()=>i())},ue=e=>{if(!e)return{onClick:p,onMousedown:p,onMouseup:p};let o=!1,t=!1;return{onClick:r=>{o&&t&&e(r),o=t=!1},onMousedown:r=>{o=r.target===r.currentTarget},onMouseup:r=>{t=r.target===r.currentTarget}}},ie=te({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:O([String,Array,Object])},zIndex:{type:O([String,Number])}}),ae={click:e=>e instanceof MouseEvent},de="overlay";var le=Z({name:"ElOverlay",props:ie,emits:ae,setup(e,{slots:o,emit:t}){const n=_(de),s=a=>{t("click",a)},{onClick:u,onMousedown:r,onMouseup:i}=ue(e.customMaskEvent?void 0:s);return()=>e.mask?P("div",{class:[n.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:u,onMousedown:r,onMouseup:i},[x(o,"default")],m.STYLE|m.CLASS|m.PROPS,["onClick","onMouseup","onMousedown"]):F("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[x(o,"default")])}});const Se=le;export{Se as E,Te as a,ue as b,ye as c,y as f,Ee as o,pe as t,be as u};
