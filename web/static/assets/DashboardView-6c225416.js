import{d as N,u as A,c as S,K as O,a as h,f as w,g,e as t,i as k,p as $,t as l,k as P,m as e,n as q,_ as K,l as L,L as F,b as E,w as a,j as s,x as j,y as B,r as R,J as M,M as G,o as H,N as J,F as Z,S as Q,q as W,z as X}from"./index-4558e22a.js";import{E as D,a as I}from"./el-col-952076e8.js";/* empty css                         */import{E as C}from"./el-card-ed177746.js";import{a as Y}from"./client-5d52aa59.js";import{I as z}from"./iconify-9f979980.js";import{b as ee,d as V,i as te}from"./runtime-e5f589df.js";import{E as se}from"./el-progress-9aea7e1d.js";import{_ as T}from"./_plugin-vue_export-helper-c27b6911.js";import{u as ae}from"./global-72cf06e4.js";import{E as oe}from"./index-01f1d0af.js";import"./typescript-00cc0b5d.js";import"./index-60a14872.js";import"./index-21c5f4c3.js";import"./use-global-config-0868fc11.js";import"./index-6615aa32.js";const ne=ee({decimalSeparator:{type:String,default:"."},groupSeparator:{type:String,default:","},precision:{type:Number,default:0},formatter:Function,value:{type:V([Number,Object]),default:0},prefix:String,suffix:String,title:String,valueStyle:{type:V([String,Object,Array])}}),le=N({name:"ElStatistic"}),ce=N({...le,props:ne,setup(i,{expose:n}){const b=i,_=A("statistic"),c=S(()=>{const{value:o,formatter:d,precision:u,decimalSeparator:r,groupSeparator:v}=b;if(O(d))return d(o);if(!te(o))return o;let[y,p=""]=String(o).split(".");return p=p.padEnd(u,"0").slice(0,u>0?u:0),y=y.replace(/\B(?=(\d{3})+(?!\d))/g,v),[y,p].join(p?r:"")});return n({displayValue:c}),(o,d)=>(h(),w("div",{class:g(t(_).b())},[o.$slots.title||o.title?(h(),w("div",{key:0,class:g(t(_).e("head"))},[k(o.$slots,"title",{},()=>[$(l(o.title),1)])],2)):P("v-if",!0),e("div",{class:g(t(_).e("content"))},[o.$slots.prefix||o.prefix?(h(),w("div",{key:0,class:g(t(_).e("prefix"))},[k(o.$slots,"prefix",{},()=>[e("span",null,l(o.prefix),1)])],2)):P("v-if",!0),e("span",{class:g(t(_).e("number")),style:q(o.valueStyle)},l(t(c)),7),o.$slots.suffix||o.suffix?(h(),w("div",{key:1,class:g(t(_).e("suffix"))},[k(o.$slots,"suffix",{},()=>[e("span",null,l(o.suffix),1)])],2)):P("v-if",!0)],2)],2))}});var re=K(ce,[["__file","statistic.vue"]]);const ie=L(re);const _e={style:{display:"inline-flex","align-items":"center"}},de={style:{display:"inline-flex","align-items":"center"}},ue={class:"el-statistic"},pe={class:"el-statistic__head v-mid"},me={class:"el-statistic__content"},fe={class:"el-statistic__number"},he={__name:"UserUsage",setup(i){const n=F("statsData");return(b,_)=>{const c=ie,o=C,d=D,u=I;return h(),E(u,{class:"mb-3 text-center",gutter:10},{default:a(()=>[s(d,{md:6,sm:12},{default:a(()=>[s(o,{shadow:"hover"},{default:a(()=>[s(c,{value:t(n).user_stats.websiteCount},{title:a(()=>[e("div",_e,[s(t(z),{icon:"material-symbols-light:globe",style:{"font-size":"18px"},inline:!0}),$(" 网站数量 ")])]),_:1},8,["value"])]),_:1})]),_:1}),s(d,{md:6,sm:12},{default:a(()=>[s(o,{shadow:"hover"},{default:a(()=>[s(c,{value:t(n).user_stats.databaseCount},{title:a(()=>[e("div",de,[s(t(z),{icon:"material-symbols:database-outline",style:{"font-size":"18px"},inline:!0}),$(" 数据库 ")])]),_:1},8,["value"])]),_:1})]),_:1}),s(d,{md:6,sm:12},{default:a(()=>[s(o,{shadow:"hover"},{default:a(()=>[s(c,{value:t(n).user_stats.cronjobCount},{title:a(()=>[e("div",null,[s(t(z),{icon:"ic:outline-task-alt",style:{"font-size":"18px"},inline:!0}),$(" 计划任务 ")])]),_:1},8,["value"])]),_:1})]),_:1}),s(d,{md:6,sm:12},{default:a(()=>[s(o,{shadow:"hover"},{default:a(()=>[e("div",ue,[e("div",pe,[s(t(z),{icon:"ri:time-line",style:{"font-size":"18px"},inline:!0}),$(" 运行时间 ")]),e("div",me,[e("span",fe,l(t(n).host.uptime),1)])])]),_:1})]),_:1})]),_:1})}}};const x=i=>(j("data-v-c947d3be"),i=i(),B(),i),ve=x(()=>e("div",{class:"card-header font-size-4 mb-2"},"系统运行状态",-1)),ye={class:"percentage-value"},be=x(()=>e("span",{class:"percentage-label"},"CPU 使用率",-1)),ge={class:"font-size-3"},Se={class:"percentage-value"},we=x(()=>e("span",{class:"percentage-label"},"内存使用率",-1)),$e={class:"font-size-3"},xe={class:"percentage-value"},ze=x(()=>e("span",{class:"percentage-label"},"Swap内存使用率",-1)),ke={class:"font-size-3"},Pe={class:"percentage-value"},Ee=x(()=>e("span",{class:"percentage-label"},"挂载点：/",-1)),De={class:"font-size-3"},Ie={__name:"SysStats",setup(i){const n=F("statsData"),b=S(()=>n.cpu.used_percent?parseFloat(n.cpu.used_percent):0),_=S(()=>n.memory.used_percent?parseFloat(n.memory.used_percent):0),c=S(()=>n.memory.swap_used_percent?parseFloat(n.memory.swap_used_percent):0),o=S(()=>n.disk.used_percent?parseFloat(n.disk.used_percent):0);return(d,u)=>{const r=se,v=D,y=I,p=C;return h(),E(p,{shadow:"hover",class:"mb-3"},{default:a(()=>[ve,s(y,{class:"mb-3 text-center",gutter:10},{default:a(()=>[s(v,{md:6,sm:12},{default:a(()=>[s(r,{type:"dashboard",percentage:b.value,status:"success",class:"cpu"},{default:a(({percentage:m})=>[e("span",ye,l(m)+"%",1),be]),_:1},8,["percentage"]),e("div",ge,"CPU核心数:"+l(t(n).cpu.physical_count),1)]),_:1}),s(v,{md:6,sm:12},{default:a(()=>[s(r,{type:"dashboard",percentage:_.value,status:"success"},{default:a(({percentage:m})=>[e("span",Se,l(m)+"%",1),we]),_:1},8,["percentage"]),e("div",$e," 总大小:"+l(t(n).memory.total)+"/可用:"+l(t(n).memory.available),1)]),_:1}),s(v,{md:6,sm:12},{default:a(()=>[s(r,{type:"dashboard",percentage:c.value,status:"success"},{default:a(({percentage:m})=>[e("span",xe,l(m)+"%",1),ze]),_:1},8,["percentage"]),e("div",ke," 总大小:"+l(t(n).memory.swap_total)+"/可用:"+l(t(n).memory.swap_free),1)]),_:1}),s(v,{md:6,sm:12},{default:a(()=>[s(r,{type:"dashboard",percentage:o.value,status:"success"},{default:a(({percentage:m})=>[e("span",Pe,l(m)+"%",1),Ee]),_:1},8,["percentage"]),e("div",De," 总大小:"+l(t(n).disk.total)+"/可用:"+l(t(n).disk.free),1)]),_:1})]),_:1})]),_:1})}}},Ce=T(Ie,[["__scopeId","data-v-c947d3be"]]);const f=i=>(j("data-v-5936e113"),i=i(),B(),i),Ve=f(()=>e("div",{class:"card-header font-size-4 mb-2"},"服务器信息",-1)),Ne={class:"text item"},Fe={style:{width:"100%"},class:"border-1"},je=f(()=>e("td",null,"主机名称",-1)),Be={class:"color-zinc-400"},Te=f(()=>e("td",null,"操作系统",-1)),Ue={class:"color-zinc-400"},Ae=f(()=>e("td",null,"发行版",-1)),Oe={class:"color-zinc-400"},qe=f(()=>e("td",null,"CPU 架构",-1)),Ke={class:"color-zinc-400"},Le=f(()=>e("td",null,"内核版本",-1)),Re={class:"color-zinc-400"},Me=f(()=>e("td",null,"服务器启动时间",-1)),Ge={class:"color-zinc-400"},He=f(()=>e("td",null,"服务器已经运行",-1)),Je={class:"color-zinc-400"},Ze=f(()=>e("td",null,"ZAP 版本",-1)),Qe={class:"color-zinc-400"},We={__name:"DashboardView",setup(i){const n=R(!0),b=W(()=>X(()=>import("./IOStats-fb191148.js"),["assets/IOStats-fb191148.js","assets/index-4558e22a.js","assets/index-dd61018d.css","assets/el-card-ed177746.js","assets/runtime-e5f589df.js","assets/el-card-7b6ad268.css","assets/commons-87932c0b.js","assets/iconify-9f979980.js","assets/index-7df96f5b.js","assets/index-60a14872.js","assets/index-6615aa32.js","assets/use-form-common-props-276dc413.js","assets/constants-84857360.js","assets/el-tag-263a511e.css"])),_=ae(),c=M({user_stats:{},cpu:{},memory:{},host:{},swapmem:{},disk:{},net:{}});G("statsData",c);const o=S(()=>{var r=new Date(c.host.BootTime*1e3);return r.toLocaleString()});let d;H(()=>{u(),d=setInterval(()=>{n.value!==!1&&u()},4e3)}),J(()=>{clearInterval(d)});function u(){n.value=!1,Y({url:"/v1/statistics/dashboard",loading:!1}).then(r=>{c.user_stats=r.user_stats,c.cpu=r.cpu,c.memory=r.memory,c.host=r.host,c.swapmem=r.swapmem,c.disk=r.disk,c.net=r.net}).finally(()=>{n.value=!0})}return(r,v)=>{const y=C,p=D,m=oe,U=I;return h(),w(Z,null,[s(he),s(Ce),s(U,{gutter:20},{default:a(()=>[s(p,{md:10,sm:24},{default:a(()=>[s(y,{class:"box-card mb-3"},{default:a(()=>[Ve,e("div",Ne,[e("table",Fe,[e("tr",null,[je,e("td",Be,l(t(c).host.Hostname),1)]),e("tr",null,[Te,e("td",Ue,l(t(c).host.OS),1)]),e("tr",null,[Ae,e("td",Oe,l(t(c).host.Platform)+" "+l(t(c).host.PlatformVersion),1)]),e("tr",null,[qe,e("td",Ke,l(t(c).host.KernelArch),1)]),e("tr",null,[Le,e("td",Re,l(t(c).host.KernelVersion),1)]),e("tr",null,[Me,e("td",Ge,l(t(o)),1)]),e("tr",null,[He,e("td",Je,l(t(c).host.uptime),1)]),e("tr",null,[Ze,e("td",Qe,l(t(_).settings.version)+"("+l(t(_).settings.build_date)+") ",1)])])])]),_:1})]),_:1}),s(p,{md:14,sm:24},{default:a(()=>[(h(),E(Q,null,{default:a(()=>[s(t(b))]),fallback:a(()=>[s(m,{rows:4,animated:"",translate:"yes"})]),_:1}))]),_:1})]),_:1})],64)}}},mt=T(We,[["__scopeId","data-v-5936e113"]]);export{mt as default};
