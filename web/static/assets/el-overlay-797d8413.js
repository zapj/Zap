import{b as S,d as B}from"./runtime-909e2ee3.js";import{i as _,g as $,b as Z,d as D,a as q}from"./index-3bac334e.js";import{U as T}from"./event-8e91c63d.js";import{b as G}from"./constants-b6c0c234.js";import{u as x}from"./index-9f57bd93.js";import{f as X}from"./use-global-config-e0c846e4.js";import{r as c,c as I,X as P,a0 as Y,o as j,Y as H,au as J}from"./index-e26e72e9.js";import{u as K}from"./index-6fc089e4.js";import{i as Q}from"./focus-trap-f40e746e.js";const W=S({center:Boolean,alignCenter:Boolean,closeIcon:{type:_},customClass:{type:String,default:""},draggable:Boolean,fullscreen:Boolean,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),ce={close:()=>!0},re=S({...W,appendToBody:Boolean,appendTo:{type:B(String),default:"body"},beforeClose:{type:B(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1},headerAriaLevel:{type:String,default:"2"}}),de={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[T]:e=>G(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},fe=(e,a)=>{var v;const l=H().emit,{nextZIndex:p}=$();let C="";const F=x(),O=x(),t=c(!1),r=c(!1),i=c(!1),d=c((v=e.zIndex)!=null?v:p());let s,u;const h=X("namespace",J),E=I(()=>{const o={},n=`--${h.value}-dialog`;return e.fullscreen||(e.top&&(o[`${n}-margin-top`]=e.top),e.width&&(o[`${n}-width`]=Z(e.width))),o}),A=I(()=>e.alignCenter?{display:"flex"}:{});function k(){l("opened")}function w(){l("closed"),l(T,!1),e.destroyOnClose&&(i.value=!1)}function L(){l("close")}function b(){u==null||u(),s==null||s(),e.openDelay&&e.openDelay>0?{stop:s}=D(()=>g(),e.openDelay):g()}function f(){s==null||s(),u==null||u(),e.closeDelay&&e.closeDelay>0?{stop:u}=D(()=>y(),e.closeDelay):y()}function m(){function o(n){n||(r.value=!0,t.value=!1)}e.beforeClose?e.beforeClose(o):f()}function N(){e.closeOnClickModal&&m()}function g(){q&&(t.value=!0)}function y(){t.value=!1}function M(){l("openAutoFocus")}function z(){l("closeAutoFocus")}function U(o){var n;((n=o.detail)==null?void 0:n.focusReason)==="pointer"&&o.preventDefault()}e.lockScroll&&K(t);function V(){e.closeOnPressEscape&&m()}return P(()=>e.modelValue,o=>{o?(r.value=!1,b(),i.value=!0,d.value=Q(e.zIndex)?p():d.value++,Y(()=>{l("open"),a.value&&(a.value.scrollTop=0)})):t.value&&f()}),P(()=>e.fullscreen,o=>{a.value&&(o?(C=a.value.style.transform,a.value.style.transform=""):a.value.style.transform=C)}),j(()=>{e.modelValue&&(t.value=!0,i.value=!0,b())}),{afterEnter:k,afterLeave:w,beforeLeave:L,handleClose:m,onModalClick:N,close:f,doClose:y,onOpenAutoFocus:M,onCloseAutoFocus:z,onCloseRequested:V,onFocusoutPrevented:U,titleId:F,bodyId:O,closed:r,style:E,overlayDialogStyle:A,rendered:i,visible:t,zIndex:d}};export{de as a,W as b,ce as c,re as d,fe as u};
