import{ah as b,u as v,aC as C,X as g,aD as T,at as u,d as k,j as x,i as p,aa as M}from"./index-e26e72e9.js";import{t as S}from"./error-78e43d3e.js";import{a as m,h as y,j as E,c as P,r as O}from"./index-3bac334e.js";import{b as B,d as h}from"./runtime-909e2ee3.js";import{P as f}from"./vnode-4474326f.js";let i;const H=e=>{var t;if(!m)return 0;if(i!==void 0)return i;const o=document.createElement("div");o.className=`${e}-scrollbar__wrap`,o.style.visibility="hidden",o.style.width="100px",o.style.position="absolute",o.style.top="-9999px",document.body.appendChild(o);const s=o.offsetWidth;o.style.overflow="scroll";const l=document.createElement("div");l.style.width="100%",o.appendChild(l);const a=l.offsetWidth;return(t=o.parentNode)==null||t.removeChild(o),i=s-a,i};function D(e,t){if(!m)return;if(!t){e.scrollTop=0;return}const o=[];let s=t.offsetParent;for(;s!==null&&e!==s&&e.contains(s);)o.push(s),s=s.offsetParent;const l=t.offsetTop+o.reduce((c,d)=>c+d.offsetTop,0),a=l+t.offsetHeight,n=e.scrollTop,r=n+e.clientHeight;l<n?e.scrollTop=l:a>r&&(e.scrollTop=a-e.clientHeight)}const V=(e,t={})=>{b(e)||S("[useLockscreen]","You need to pass a ref param to this function");const o=t.ns||v("popup"),s=C(()=>o.bm("parent","hidden"));if(!m||y(document.body,s.value))return;let l=0,a=!1,n="0";const r=()=>{setTimeout(()=>{O(document==null?void 0:document.body,s.value),a&&document&&(document.body.style.width=n)},200)};g(e,c=>{if(!c){r();return}a=!y(document.body,s.value),a&&(n=document.body.style.width),l=H(o.namespace.value);const d=document.documentElement.clientHeight<document.body.scrollHeight,w=E(document.body,"overflowY");l>0&&(d||w==="scroll")&&a&&(document.body.style.width=`calc(100% - ${l}px)`),P(document.body,s.value)}),T(()=>r())},N=e=>{if(!e)return{onClick:u,onMousedown:u,onMouseup:u};let t=!1,o=!1;return{onClick:n=>{t&&o&&e(n),t=o=!1},onMousedown:n=>{t=n.target===n.currentTarget},onMouseup:n=>{o=n.target===n.currentTarget}}},W=B({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:h([String,Array,Object])},zIndex:{type:h([String,Number])}}),I={click:e=>e instanceof MouseEvent},z="overlay";var L=k({name:"ElOverlay",props:W,emits:I,setup(e,{slots:t,emit:o}){const s=v(z),l=c=>{o("click",c)},{onClick:a,onMousedown:n,onMouseup:r}=N(e.customMaskEvent?void 0:l);return()=>e.mask?x("div",{class:[s.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:a,onMousedown:n,onMouseup:r},[p(t,"default")],f.STYLE|f.CLASS|f.PROPS,["onClick","onMouseup","onMousedown"]):M("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[p(t,"default")])}});const $=L;export{$ as E,N as a,D as s,V as u};
