import{aN as T,ax as p,bi as h,y as z,$ as G,Q as K,h as A,b8 as U,u as _,bx as V,K as Y,w as $,by as q,I as j,bz as J,J as Q,bq as E,b as g,d as x,e as Z,B as P,q as O,R as F}from"./index-a62a7a28.js";import{t as ee}from"./event-2c073216.js";let m;const oe=e=>{var n;if(!T)return 0;if(m!==void 0)return m;const o=document.createElement("div");o.className=`${e}-scrollbar__wrap`,o.style.visibility="hidden",o.style.width="100px",o.style.position="absolute",o.style.top="-9999px",document.body.appendChild(o);const t=o.offsetWidth;o.style.overflow="scroll";const s=document.createElement("div");s.style.width="100%",o.appendChild(s);const r=s.offsetWidth;return(n=o.parentNode)==null||n.removeChild(o),m=t-r,m};function de(e,n){if(!T)return;if(!n){e.scrollTop=0;return}const o=[];let t=n.offsetParent;for(;t!==null&&e!==t&&e.contains(t);)o.push(t),t=t.offsetParent;const s=n.offsetTop+o.reduce((l,d)=>l+d.offsetTop,0),r=s+n.offsetHeight,u=e.scrollTop,i=u+e.clientHeight;s<u?e.scrollTop=s:r>i&&(e.scrollTop=r-e.clientHeight)}var f=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(f||{});const y=e=>{const n=p(e)?e:[e],o=[];return n.forEach(t=>{var s;p(t)?o.push(...y(t)):h(t)&&p(t.children)?o.push(...y(t.children)):(o.push(t),h(t)&&((s=t.component)!=null&&s.subTree)&&o.push(...y(t.component.subTree)))}),o},ce=(e,n,o)=>{let t={offsetX:0,offsetY:0};const s=i=>{const l=i.clientX,d=i.clientY,{offsetX:c,offsetY:v}=t,a=e.value.getBoundingClientRect(),b=a.left,w=a.top,D=a.width,H=a.height,k=document.documentElement.clientWidth,B=document.documentElement.clientHeight,I=-b+c,R=-w+v,W=k-b-D+c,X=B-w-H+v,S=C=>{const L=Math.min(Math.max(c+C.clientX-l,I),W),N=Math.min(Math.max(v+C.clientY-d,R),X);t={offsetX:L,offsetY:N},e.value&&(e.value.style.transform=`translate(${A(L)}, ${A(N)})`)},M=()=>{document.removeEventListener("mousemove",S),document.removeEventListener("mouseup",M)};document.addEventListener("mousemove",S),document.addEventListener("mouseup",M)},r=()=>{n.value&&e.value&&n.value.addEventListener("mousedown",s)},u=()=>{n.value&&e.value&&n.value.removeEventListener("mousedown",s)};z(()=>{G(()=>{o.value?r():u()})}),K(()=>{u()})},ae=(e,n={})=>{U(e)||ee("[useLockscreen]","You need to pass a ref param to this function");const o=n.ns||_("popup"),t=V(()=>o.bm("parent","hidden"));if(!T||Y(document.body,t.value))return;let s=0,r=!1,u="0";const i=()=>{setTimeout(()=>{Q(document==null?void 0:document.body,t.value),r&&document&&(document.body.style.width=u)},200)};$(e,l=>{if(!l){i();return}r=!Y(document.body,t.value),r&&(u=document.body.style.width),s=oe(o.namespace.value);const d=document.documentElement.clientHeight<document.body.scrollHeight,c=q(document.body,"overflowY");s>0&&(d||c==="scroll")&&r&&(document.body.style.width=`calc(100% - ${s}px)`),j(document.body,t.value)}),J(()=>i())},te=e=>{if(!e)return{onClick:E,onMousedown:E,onMouseup:E};let n=!1,o=!1;return{onClick:u=>{n&&o&&e(u),n=o=!1},onMousedown:u=>{n=u.target===u.currentTarget},onMouseup:u=>{o=u.target===u.currentTarget}}},ne=g({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:x([String,Array,Object])},zIndex:{type:x([String,Number])}}),se={click:e=>e instanceof MouseEvent},ue="overlay";var re=Z({name:"ElOverlay",props:ne,emits:se,setup(e,{slots:n,emit:o}){const t=_(ue),s=l=>{o("click",l)},{onClick:r,onMousedown:u,onMouseup:i}=te(e.customMaskEvent?void 0:s);return()=>e.mask?P("div",{class:[t.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:r,onMousedown:u,onMouseup:i},[O(n,"default")],f.STYLE|f.CLASS|f.PROPS,["onClick","onMouseup","onMousedown"]):F("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[O(n,"default")])}});const me=re;export{me as E,ae as a,te as b,y as f,de as s,ce as u};
