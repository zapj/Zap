import{ao as ce,av as ie,l as K,aw as ve,ax as le,ay as Ee,az as me,aA as Oe}from"./index-1bd97dec.js";import{w as h,r as P,A as $,I as x,_ as _e,d as ye,D as be,e as g,j as Te,z as M,a as we}from"./index-7f26dc48.js";function w(e){var t;const n=ie(e);return(t=n==null?void 0:n.$el)!=null?t:n}const B=K?window:void 0;function k(...e){let t,n,s,a;if(ve(e[0])||Array.isArray(e[0])?([n,s,a]=e,t=B):[t,n,s,a]=e,!t)return le;Array.isArray(n)||(n=[n]),Array.isArray(s)||(s=[s]);const i=[],l=()=>{i.forEach(d=>d()),i.length=0},f=(d,E,r,u)=>(d.addEventListener(E,r,u),()=>d.removeEventListener(E,r,u)),O=h(()=>[w(t),ie(a)],([d,E])=>{l(),d&&i.push(...n.flatMap(r=>s.map(u=>f(d,r,u,E))))},{immediate:!0,flush:"post"}),_=()=>{O(),l()};return ce(_),_}let z=!1;function Je(e,t,n={}){const{window:s=B,ignore:a=[],capture:i=!0,detectIframe:l=!1}=n;if(!s)return;Oe&&!z&&(z=!0,Array.from(s.document.body.children).forEach(r=>r.addEventListener("click",le)));let f=!0;const O=r=>a.some(u=>{if(typeof u=="string")return Array.from(s.document.querySelectorAll(u)).some(o=>o===r.target||r.composedPath().includes(o));{const o=w(u);return o&&(r.target===o||r.composedPath().includes(o))}}),d=[k(s,"click",r=>{const u=w(e);if(!(!u||u===r.target||r.composedPath().includes(u))){if(r.detail===0&&(f=!O(r)),!f){f=!0;return}t(r)}},{passive:!0,capture:i}),k(s,"pointerdown",r=>{const u=w(e);u&&(f=!r.composedPath().includes(u)&&!O(r))},{passive:!0}),l&&k(s,"blur",r=>{var u;const o=w(e);((u=s.document.activeElement)==null?void 0:u.tagName)==="IFRAME"&&!(o!=null&&o.contains(s.document.activeElement))&&t(r)})].filter(Boolean);return()=>d.forEach(r=>r())}function he(e,t=!1){const n=P(),s=()=>n.value=!!e();return s(),Ee(s,t),n}const q=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},G="__vueuse_ssr_handlers__";q[G]=q[G]||{};var J=Object.getOwnPropertySymbols,Pe=Object.prototype.hasOwnProperty,Fe=Object.prototype.propertyIsEnumerable,ge=(e,t)=>{var n={};for(var s in e)Pe.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&J)for(var s of J(e))t.indexOf(s)<0&&Fe.call(e,s)&&(n[s]=e[s]);return n};function Ye(e,t,n={}){const s=n,{window:a=B}=s,i=ge(s,["window"]);let l;const f=he(()=>a&&"ResizeObserver"in a),O=()=>{l&&(l.disconnect(),l=void 0)},_=h(()=>w(e),E=>{O(),f.value&&a&&E&&(l=new ResizeObserver(t),l.observe(E,i))},{immediate:!0,flush:"post"}),d=()=>{O(),_()};return ce(d),{isSupported:f,stop:d}}var Y;(function(e){e.UP="UP",e.RIGHT="RIGHT",e.DOWN="DOWN",e.LEFT="LEFT",e.NONE="NONE"})(Y||(Y={}));var Ie=Object.defineProperty,X=Object.getOwnPropertySymbols,Se=Object.prototype.hasOwnProperty,Le=Object.prototype.propertyIsEnumerable,Z=(e,t,n)=>t in e?Ie(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ae=(e,t)=>{for(var n in t||(t={}))Se.call(t,n)&&Z(e,n,t[n]);if(X)for(var n of X(t))Le.call(t,n)&&Z(e,n,t[n]);return e};const Ce={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};Ae({linear:me},Ce);function Re(e){return e==null}class Ne extends Error{constructor(t){super(t),this.name="ElementPlusError"}}function Xe(e,t){throw new Ne(`[${e}] ${t}`)}function Ze(e,t){}const de={tab:"Tab",enter:"Enter",space:"Space",left:"ArrowLeft",up:"ArrowUp",right:"ArrowRight",down:"ArrowDown",esc:"Escape",delete:"Delete",backspace:"Backspace",numpadEnter:"NumpadEnter",pageUp:"PageUp",pageDown:"PageDown",home:"Home",end:"End"},et="update:modelValue";let T=[];const ee=e=>{const t=e;t.key===de.esc&&T.forEach(n=>n(t))},ke=e=>{$(()=>{T.length===0&&document.addEventListener("keydown",ee),K&&T.push(e)}),x(()=>{T=T.filter(t=>t!==e),T.length===0&&K&&document.removeEventListener("keydown",ee)})},U="focus-trap.focus-after-trapped",D="focus-trap.focus-after-released",Ue="focus-trap.focusout-prevented",te={cancelable:!0,bubbles:!1},De={cancelable:!0,bubbles:!1},ne="focusAfterTrapped",se="focusAfterReleased",Ke=Symbol("elFocusTrap"),j=P(),A=P(0),H=P(0);let I=0;const fe=e=>{const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const a=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||a?NodeFilter.FILTER_SKIP:s.tabIndex>=0||s===document.activeElement?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t},oe=(e,t)=>{for(const n of e)if(!$e(n,t))return n},$e=(e,t)=>{if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1},xe=e=>{const t=fe(e),n=oe(t,e),s=oe(t.reverse(),e);return[n,s]},Be=e=>e instanceof HTMLInputElement&&"select"in e,b=(e,t)=>{if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),H.value=window.performance.now(),e!==n&&Be(e)&&t&&e.select()}};function re(e,t){const n=[...e],s=e.indexOf(t);return s!==-1&&n.splice(s,1),n}const je=()=>{let e=[];return{push:s=>{const a=e[0];a&&s!==a&&a.pause(),e=re(e,s),e.unshift(s)},remove:s=>{var a,i;e=re(e,s),(i=(a=e[0])==null?void 0:a.resume)==null||i.call(a)}}},He=(e,t=!1)=>{const n=document.activeElement;for(const s of e)if(b(s,t),document.activeElement!==n)return},ae=je(),Qe=()=>A.value>H.value,S=()=>{j.value="pointer",A.value=window.performance.now()},ue=()=>{j.value="keyboard",A.value=window.performance.now()},Ve=()=>($(()=>{I===0&&(document.addEventListener("mousedown",S),document.addEventListener("touchstart",S),document.addEventListener("keydown",ue)),I++}),x(()=>{I--,I<=0&&(document.removeEventListener("mousedown",S),document.removeEventListener("touchstart",S),document.removeEventListener("keydown",ue))}),{focusReason:j,lastUserFocusTimestamp:A,lastAutomatedFocusTimestamp:H}),L=e=>new CustomEvent(Ue,{...De,detail:e}),We=ye({name:"ElFocusTrap",inheritAttrs:!1,props:{loop:Boolean,trapped:Boolean,focusTrapEl:Object,focusStartEl:{type:[Object,String],default:"first"}},emits:[ne,se,"focusin","focusout","focusout-prevented","release-requested"],setup(e,{emit:t}){const n=P();let s,a;const{focusReason:i}=Ve();ke(o=>{e.trapped&&!l.paused&&t("release-requested",o)});const l={paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}},f=o=>{if(!e.loop&&!e.trapped||l.paused)return;const{key:c,altKey:p,ctrlKey:v,metaKey:m,currentTarget:Q,shiftKey:V}=o,{loop:W}=e,pe=c===de.tab&&!p&&!v&&!m,F=document.activeElement;if(pe&&F){const C=Q,[R,N]=xe(C);if(R&&N){if(!V&&F===N){const y=L({focusReason:i.value});t("focusout-prevented",y),y.defaultPrevented||(o.preventDefault(),W&&b(R,!0))}else if(V&&[R,C].includes(F)){const y=L({focusReason:i.value});t("focusout-prevented",y),y.defaultPrevented||(o.preventDefault(),W&&b(N,!0))}}else if(F===C){const y=L({focusReason:i.value});t("focusout-prevented",y),y.defaultPrevented||o.preventDefault()}}};be(Ke,{focusTrapRef:n,onKeydown:f}),h(()=>e.focusTrapEl,o=>{o&&(n.value=o)},{immediate:!0}),h([n],([o],[c])=>{o&&(o.addEventListener("keydown",f),o.addEventListener("focusin",d),o.addEventListener("focusout",E)),c&&(c.removeEventListener("keydown",f),c.removeEventListener("focusin",d),c.removeEventListener("focusout",E))});const O=o=>{t(ne,o)},_=o=>t(se,o),d=o=>{const c=g(n);if(!c)return;const p=o.target,v=o.relatedTarget,m=p&&c.contains(p);e.trapped||v&&c.contains(v)||(s=v),m&&t("focusin",o),!l.paused&&e.trapped&&(m?a=p:b(a,!0))},E=o=>{const c=g(n);if(!(l.paused||!c))if(e.trapped){const p=o.relatedTarget;!Re(p)&&!c.contains(p)&&setTimeout(()=>{if(!l.paused&&e.trapped){const v=L({focusReason:i.value});t("focusout-prevented",v),v.defaultPrevented||b(a,!0)}},0)}else{const p=o.target;p&&c.contains(p)||t("focusout",o)}};async function r(){await M();const o=g(n);if(o){ae.push(l);const c=o.contains(document.activeElement)?s:document.activeElement;if(s=c,!o.contains(c)){const v=new Event(U,te);o.addEventListener(U,O),o.dispatchEvent(v),v.defaultPrevented||M(()=>{let m=e.focusStartEl;we(m)||(b(m),document.activeElement!==m&&(m="first")),m==="first"&&He(fe(o),!0),(document.activeElement===c||m==="container")&&b(o)})}}}function u(){const o=g(n);if(o){o.removeEventListener(U,O);const c=new CustomEvent(D,{...te,detail:{focusReason:i.value}});o.addEventListener(D,_),o.dispatchEvent(c),!c.defaultPrevented&&(i.value=="keyboard"||!Qe()||o.contains(document.activeElement))&&b(s??document.body),o.removeEventListener(D,_),ae.remove(l)}}return $(()=>{e.trapped&&r(),h(()=>e.trapped,o=>{o?r():u()})}),x(()=>{e.trapped&&u()}),{onKeydown:f}}});function Me(e,t,n,s,a,i){return Te(e.$slots,"default",{handleKeydown:e.onKeydown})}var tt=_e(We,[["render",Me],["__file","focus-trap.vue"]]);export{tt as E,Ke as F,et as U,de as a,Ye as b,w as c,Ze as d,Re as i,Je as o,Xe as t,k as u};
