import{J as X,l as Y,e as w,s as N,a3 as G,q as K,r as g,b as z,d as h}from"./index-cea144c3.js";import{a4 as E,ab as x,A as V,U as $,I as j,ah as q,u as _,ai as J,w as Q,aj as Z,a9 as p,d as P,v as F,j as O,S as ee}from"./index-94400821.js";import{t as te}from"./focus-trap-503f6e23.js";const oe='a[href],button:not([disabled]),button:not([hidden]),:not([tabindex="-1"]),input:not([disabled]),input:not([type="hidden"]),select:not([disabled]),textarea:not([disabled])',ne=e=>getComputedStyle(e).position==="fixed"?!1:e.offsetParent!==null,ve=e=>Array.from(e.querySelectorAll(oe)).filter(o=>se(o)&&ne(o)),se=e=>{if(e.tabIndex>0||e.tabIndex===0&&e.getAttribute("tabIndex")!==null)return!0;if(e.disabled)return!1;switch(e.nodeName){case"A":return!!e.href&&e.rel!=="ignore";case"INPUT":return!(e.type==="hidden"||e.type==="file");case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}},Ee=function(e,o,...t){let n;o.includes("mouse")||o.includes("click")?n="MouseEvents":o.includes("key")?n="KeyboardEvent":n="HTMLEvents";const s=document.createEvent(n);return s.initEvent(o,...t),e.dispatchEvent(s),e};function pe(){if(!arguments.length)return[];var e=arguments[0];return X(e)?e:[e]}let c;const re=e=>{var o;if(!Y)return 0;if(c!==void 0)return c;const t=document.createElement("div");t.className=`${e}-scrollbar__wrap`,t.style.visibility="hidden",t.style.width="100px",t.style.position="absolute",t.style.top="-9999px",document.body.appendChild(t);const n=t.offsetWidth;t.style.overflow="scroll";const s=document.createElement("div");s.style.width="100%",t.appendChild(s);const u=s.offsetWidth;return(o=t.parentNode)==null||o.removeChild(t),c=n-u,c};var f=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(f||{});const y=e=>{const o=E(e)?e:[e],t=[];return o.forEach(n=>{var s;E(n)?t.push(...y(n)):x(n)&&E(n.children)?t.push(...y(n.children)):(t.push(n),x(n)&&((s=n.component)!=null&&s.subTree)&&t.push(...y(n.component.subTree)))}),t},ye=(e,o,t)=>{let n={offsetX:0,offsetY:0};const s=i=>{const a=i.clientX,m=i.clientY,{offsetX:d,offsetY:v}=n,l=e.value.getBoundingClientRect(),b=l.left,T=l.top,k=l.width,D=l.height,I=document.documentElement.clientWidth,B=document.documentElement.clientHeight,H=-b+d,R=-T+v,U=I-b-k+d,W=B-T-D+v,S=M=>{const A=Math.min(Math.max(d+M.clientX-a,H),U),C=Math.min(Math.max(v+M.clientY-m,R),W);n={offsetX:A,offsetY:C},e.value&&(e.value.style.transform=`translate(${w(A)}, ${w(C)})`)},L=()=>{document.removeEventListener("mousemove",S),document.removeEventListener("mouseup",L)};document.addEventListener("mousemove",S),document.addEventListener("mouseup",L)},u=()=>{o.value&&e.value&&o.value.addEventListener("mousedown",s)},r=()=>{o.value&&e.value&&o.value.removeEventListener("mousedown",s)};V(()=>{$(()=>{t.value?u():r()})}),j(()=>{r()})},be=(e,o={})=>{q(e)||te("[useLockscreen]","You need to pass a ref param to this function");const t=o.ns||_("popup"),n=J(()=>t.bm("parent","hidden"));if(!Y||N(document.body,n.value))return;let s=0,u=!1,r="0";const i=()=>{setTimeout(()=>{g(document==null?void 0:document.body,n.value),u&&document&&(document.body.style.width=r)},200)};Q(e,a=>{if(!a){i();return}u=!N(document.body,n.value),u&&(r=document.body.style.width),s=re(t.namespace.value);const m=document.documentElement.clientHeight<document.body.scrollHeight,d=G(document.body,"overflowY");s>0&&(m||d==="scroll")&&u&&(document.body.style.width=`calc(100% - ${s}px)`),K(document.body,n.value)}),Z(()=>i())},ue=e=>{if(!e)return{onClick:p,onMousedown:p,onMouseup:p};let o=!1,t=!1;return{onClick:r=>{o&&t&&e(r),o=t=!1},onMousedown:r=>{o=r.target===r.currentTarget},onMouseup:r=>{t=r.target===r.currentTarget}}},ie=z({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:h([String,Array,Object])},zIndex:{type:h([String,Number])}}),ae={click:e=>e instanceof MouseEvent},de="overlay";var le=P({name:"ElOverlay",props:ie,emits:ae,setup(e,{slots:o,emit:t}){const n=_(de),s=a=>{t("click",a)},{onClick:u,onMousedown:r,onMouseup:i}=ue(e.customMaskEvent?void 0:s);return()=>e.mask?F("div",{class:[n.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:u,onMousedown:r,onMouseup:i},[O(o,"default")],f.STYLE|f.CLASS|f.PROPS,["onClick","onMouseup","onMousedown"]):ee("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[O(o,"default")])}});const Te=le;export{Te as E,be as a,ue as b,pe as c,y as f,ve as o,Ee as t,ye as u};
