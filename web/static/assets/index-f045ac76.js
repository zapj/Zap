import{aX as E,aH as f,bl as y,bc as w,u as b,bz as N,K as T,w as A,bA as M,I as L,bB as O,J as _,bt as p,b as R,d as v,e as k,B as x,q as S,R as H}from"./index-cc2a4353.js";import{t as Y}from"./event-2c073216.js";let d;const B=e=>{var s;if(!E)return 0;if(d!==void 0)return d;const o=document.createElement("div");o.className=`${e}-scrollbar__wrap`,o.style.visibility="hidden",o.style.width="100px",o.style.position="absolute",o.style.top="-9999px",document.body.appendChild(o);const t=o.offsetWidth;o.style.overflow="scroll";const n=document.createElement("div");n.style.width="100%",o.appendChild(n);const u=n.offsetWidth;return(s=o.parentNode)==null||s.removeChild(o),d=t-u,d};function V(e,s){if(!E)return;if(!s){e.scrollTop=0;return}const o=[];let t=s.offsetParent;for(;t!==null&&e!==t&&e.contains(t);)o.push(t),t=t.offsetParent;const n=s.offsetTop+o.reduce((i,a)=>i+a.offsetTop,0),u=n+s.offsetHeight,r=e.scrollTop,l=r+e.clientHeight;n<r?e.scrollTop=n:u>l&&(e.scrollTop=u-e.clientHeight)}var c=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(c||{});const m=e=>{const s=f(e)?e:[e],o=[];return s.forEach(t=>{var n;f(t)?o.push(...m(t)):y(t)&&f(t.children)?o.push(...m(t.children)):(o.push(t),y(t)&&((n=t.component)!=null&&n.subTree)&&o.push(...m(t.component.subTree)))}),o},U=(e,s={})=>{w(e)||Y("[useLockscreen]","You need to pass a ref param to this function");const o=s.ns||b("popup"),t=N(()=>o.bm("parent","hidden"));if(!E||T(document.body,t.value))return;let n=0,u=!1,r="0";const l=()=>{setTimeout(()=>{_(document==null?void 0:document.body,t.value),u&&document&&(document.body.style.width=r)},200)};A(e,i=>{if(!i){l();return}u=!T(document.body,t.value),u&&(r=document.body.style.width),n=B(o.namespace.value);const a=document.documentElement.clientHeight<document.body.scrollHeight,C=M(document.body,"overflowY");n>0&&(a||C==="scroll")&&u&&(document.body.style.width=`calc(100% - ${n}px)`),L(document.body,t.value)}),O(()=>l())},D=e=>{if(!e)return{onClick:p,onMousedown:p,onMouseup:p};let s=!1,o=!1;return{onClick:r=>{s&&o&&e(r),s=o=!1},onMousedown:r=>{s=r.target===r.currentTarget},onMouseup:r=>{o=r.target===r.currentTarget}}},I=R({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:v([String,Array,Object])},zIndex:{type:v([String,Number])}}),W={click:e=>e instanceof MouseEvent},h="overlay";var z=k({name:"ElOverlay",props:I,emits:W,setup(e,{slots:s,emit:o}){const t=b(h),n=i=>{o("click",i)},{onClick:u,onMousedown:r,onMouseup:l}=D(e.customMaskEvent?void 0:n);return()=>e.mask?x("div",{class:[t.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:u,onMousedown:r,onMouseup:l},[S(s,"default")],c.STYLE|c.CLASS|c.PROPS,["onClick","onMouseup","onMousedown"]):H("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[S(s,"default")])}});const X=z;export{X as E,D as a,m as f,V as s,U as u};
