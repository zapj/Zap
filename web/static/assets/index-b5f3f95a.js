import{a8 as f,aq as v,ai as w,u as C,av as N,v as M,aw as A,at as p,d as L,j as O,i as y,z as _}from"./index-ef788864.js";import{t as R}from"./error-78e43d3e.js";import{e as E,h as T,t as k,a as x,r as Y}from"./index-499c28ec.js";import{b as D,d as S}from"./runtime-6c5e7d4b.js";let d;const H=e=>{var s;if(!E)return 0;if(d!==void 0)return d;const o=document.createElement("div");o.className=`${e}-scrollbar__wrap`,o.style.visibility="hidden",o.style.width="100px",o.style.position="absolute",o.style.top="-9999px",document.body.appendChild(o);const t=o.offsetWidth;o.style.overflow="scroll";const n=document.createElement("div");n.style.width="100%",o.appendChild(n);const u=n.offsetWidth;return(s=o.parentNode)==null||s.removeChild(o),d=t-u,d};function j(e,s){if(!E)return;if(!s){e.scrollTop=0;return}const o=[];let t=s.offsetParent;for(;t!==null&&e!==t&&e.contains(t);)o.push(t),t=t.offsetParent;const n=s.offsetTop+o.reduce((i,c)=>i+c.offsetTop,0),u=n+s.offsetHeight,r=e.scrollTop,l=r+e.clientHeight;n<r?e.scrollTop=n:u>l&&(e.scrollTop=u-e.clientHeight)}var a=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(a||{});const m=e=>{const s=f(e)?e:[e],o=[];return s.forEach(t=>{var n;f(t)?o.push(...m(t)):v(t)&&f(t.children)?o.push(...m(t.children)):(o.push(t),v(t)&&((n=t.component)!=null&&n.subTree)&&o.push(...m(t.component.subTree)))}),o},X=(e,s={})=>{w(e)||R("[useLockscreen]","You need to pass a ref param to this function");const o=s.ns||C("popup"),t=N(()=>o.bm("parent","hidden"));if(!E||T(document.body,t.value))return;let n=0,u=!1,r="0";const l=()=>{setTimeout(()=>{Y(document==null?void 0:document.body,t.value),u&&document&&(document.body.style.width=r)},200)};M(e,i=>{if(!i){l();return}u=!T(document.body,t.value),u&&(r=document.body.style.width),n=H(o.namespace.value);const c=document.documentElement.clientHeight<document.body.scrollHeight,b=k(document.body,"overflowY");n>0&&(c||b==="scroll")&&u&&(document.body.style.width=`calc(100% - ${n}px)`),x(document.body,t.value)}),A(()=>l())},I=e=>{if(!e)return{onClick:p,onMousedown:p,onMouseup:p};let s=!1,o=!1;return{onClick:r=>{s&&o&&e(r),s=o=!1},onMousedown:r=>{s=r.target===r.currentTarget},onMouseup:r=>{o=r.target===r.currentTarget}}},B=D({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:S([String,Array,Object])},zIndex:{type:S([String,Number])}}),h={click:e=>e instanceof MouseEvent},W="overlay";var z=L({name:"ElOverlay",props:B,emits:h,setup(e,{slots:s,emit:o}){const t=C(W),n=i=>{o("click",i)},{onClick:u,onMousedown:r,onMouseup:l}=I(e.customMaskEvent?void 0:n);return()=>e.mask?O("div",{class:[t.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:u,onMousedown:r,onMouseup:l},[y(s,"default")],a.STYLE|a.CLASS|a.PROPS,["onClick","onMouseup","onMousedown"]):_("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[y(s,"default")])}});const $=z;export{$ as E,I as a,m as f,j as s,X as u};
